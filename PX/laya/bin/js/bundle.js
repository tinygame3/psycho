var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var HouseUI_1 = require("./scripts/HouseUI");
var MainUI_1 = require("./scripts/MainUI");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("scripts/HouseUI.ts", HouseUI_1.default);
        reg("scripts/MainUI.ts", MainUI_1.default);
    };
    GameConfig.width = 640;
    GameConfig.height = 1136;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "MainScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./scripts/HouseUI":3,"./scripts/MainUI":4}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.screenMode = Laya.Stage.SCREEN_HORIZONTAL;
        //Laya.stage.scaleMode = Laya.Stage.SCALE_FIXED_WIDTH;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var HouseUI = /** @class */ (function (_super) {
    __extends(HouseUI, _super);
    function HouseUI() {
        var _this = _super.call(this) || this;
        _this.maxLeftX = 0;
        _this.maxTopY = 0;
        _this.init();
        return _this;
    }
    HouseUI.prototype.init = function () {
        this.bg = new Laya.Sprite();
        this.bg.loadImage("res/bg/bg_newyear.png");
        this.addChild(this.bg);
        this.bg.pos(0, 0);
        this.hourse = new Laya.Sprite();
        this.hourse.loadImage("res/item/win_165.png");
        this.addChild(this.hourse);
        this.hourse.pos(100, 750);
    };
    HouseUI.prototype.onEnable = function () {
        this.btlReturn.on(Laya.Event.CLICK, this, this.onReturn);
    };
    HouseUI.prototype.onReturn = function () {
        Laya.Scene.close("HouseScene.scene");
        Laya.Scene.open("MainScene.scene");
    };
    return HouseUI;
}(Laya.Scene));
exports.default = HouseUI;
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("../GameConfig");
var MainUI = /** @class */ (function (_super) {
    __extends(MainUI, _super);
    function MainUI() {
        var _this = _super.call(this) || this;
        _this.maxLeftX = 0;
        _this.maxTopY = 0;
        _this.lastX = null;
        _this.lastY = null;
        _this.init();
        return _this;
    }
    MainUI.prototype.init = function () {
        this.bg = new Laya.Sprite();
        this.bg.loadImage("res/bg/bg_newyear.png", Laya.Handler.create(this, this.OnLoadBgCompleted));
        this.addChild(this.bg);
        this.bg.pos(0, 0);
        this.hourse = new Laya.Sprite();
        this.hourse.loadImage("res/item/win_164.png");
        this.addChild(this.hourse);
        this.hourse.pos(100, 750);
        this.hourse.on(Laya.Event.MOUSE_OUT, this, this.OnFocusOff, [this.hourse]);
        this.hourse.on(Laya.Event.MOUSE_OVER, this, this.OnFocusOn, [this.hourse]);
        this.hourse.on(Laya.Event.CLICK, this, this.OnHourseClick, [this.hourse]);
    };
    MainUI.prototype.GlowFilter = function (hourse, bShowGlow) {
        if (bShowGlow) {
            //创建一个发光滤镜
            var glowFilter = new Laya.GlowFilter("#ffff00", 10, 0, 0);
            //设置滤镜集合为发光滤镜
            hourse.filters = [glowFilter];
        }
        else {
            hourse.filters = [];
        }
    };
    MainUI.prototype.OnFocusOff = function (sp) {
        this.GlowFilter(sp, false);
    };
    MainUI.prototype.OnFocusOn = function (sp) {
        this.GlowFilter(sp, true);
    };
    MainUI.prototype.OnHourseClick = function (sp) {
        Laya.Scene.open("HouseScene.scene");
    };
    MainUI.prototype.OnLoadBgCompleted = function () {
        this.maxLeftX = GameConfig_1.default.width - this.bg.width;
        if (this.maxLeftX > 0) {
            this.maxLeftX = 0;
        }
        this.maxTopY = GameConfig_1.default.height - this.bg.height;
        if (this.maxTopY > 0) {
            this.maxTopY = 0;
        }
    };
    MainUI.prototype.onEnable = function () {
        this.btlHouse.on(Laya.Event.CLICK, this, this.onHouseClick);
        this.btlWorld.on(Laya.Event.CLICK, this, this.onWorldClick);
        this.btlFriends.on(Laya.Event.CLICK, this, this.onFriendsClick);
        Laya.stage.on(Laya.Event.MOUSE_MOVE, this, this.OnMouseMove);
        Laya.stage.on(Laya.Event.MOUSE_OUT, this, this.OnMouseEnd);
    };
    MainUI.prototype.OnMouseMove = function () {
        if (this.lastX == null || this.lastY == null) {
        }
        else {
            return;
            var deltaX = Laya.stage.mouseX - this.lastX;
            var deltaY = Laya.stage.mouseY - this.lastY;
            this.bg.x = this.bg.x + deltaX;
            this.bg.y = this.bg.x + deltaY;
            if (this.bg.x > 0) {
                this.bg.x = 0;
            }
            if (this.bg.y > 0) {
                this.bg.y = 0;
            }
            if (this.bg.x < this.maxLeftX) {
                this.bg.x = this.maxLeftX;
            }
            if (this.bg.y < this.maxTopY) {
                this.bg.y = this.maxTopY;
            }
            this.hourse.pos(100 + this.bg.x, 750 + this.bg.y);
        }
        this.lastX = Laya.stage.mouseX;
        this.lastY = Laya.stage.mouseY;
    };
    MainUI.prototype.OnMouseEnd = function () {
        this.lastX = null;
        this.lastY = null;
    };
    MainUI.prototype.onHouseClick = function (e) {
        this.btlHouse.label = "pressed";
    };
    MainUI.prototype.onWorldClick = function (e) {
        this.btlWorld.label = "pressed";
    };
    MainUI.prototype.onFriendsClick = function (e) {
        this.btlFriends.label = "pressed";
    };
    return MainUI;
}(Laya.Scene));
exports.default = MainUI;
},{"../GameConfig":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL1Byb2dyYW0gRmlsZXMvTGF5YUFpcklERS9yZXNvdXJjZXMvYXBwL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvR2FtZUNvbmZpZy50cyIsInNyYy9NYWluLnRzIiwic3JjL3NjcmlwdHMvSG91c2VVSS50cyIsInNyYy9zY3JpcHRzL01haW5VSS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNWQSxnR0FBZ0c7QUFDaEcsNkNBQXVDO0FBQ3ZDLDJDQUFxQztBQUNyQzs7RUFFRTtBQUNGO0lBYUk7SUFBYyxDQUFDO0lBQ1IsZUFBSSxHQUFYO1FBQ0ksSUFBSSxHQUFHLEdBQWEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUM7UUFDN0MsR0FBRyxDQUFDLG9CQUFvQixFQUFDLGlCQUFPLENBQUMsQ0FBQztRQUNsQyxHQUFHLENBQUMsbUJBQW1CLEVBQUMsZ0JBQU0sQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFqQk0sZ0JBQUssR0FBUSxHQUFHLENBQUM7SUFDakIsaUJBQU0sR0FBUSxJQUFJLENBQUM7SUFDbkIsb0JBQVMsR0FBUSxZQUFZLENBQUM7SUFDOUIscUJBQVUsR0FBUSxNQUFNLENBQUM7SUFDekIsaUJBQU0sR0FBUSxLQUFLLENBQUM7SUFDcEIsaUJBQU0sR0FBUSxNQUFNLENBQUM7SUFDckIscUJBQVUsR0FBSyxpQkFBaUIsQ0FBQztJQUNqQyxvQkFBUyxHQUFRLEVBQUUsQ0FBQztJQUNwQixnQkFBSyxHQUFTLEtBQUssQ0FBQztJQUNwQixlQUFJLEdBQVMsS0FBSyxDQUFDO0lBQ25CLHVCQUFZLEdBQVMsS0FBSyxDQUFDO0lBQzNCLDRCQUFpQixHQUFTLElBQUksQ0FBQztJQU8xQyxpQkFBQztDQW5CRCxBQW1CQyxJQUFBO2tCQW5Cb0IsVUFBVTtBQW9CL0IsVUFBVSxDQUFDLElB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Q0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO0lBQ3RDLENBQUM7SUFDTCxhQUFDO0FBQUQsQ0F4SEUsQUF3SEQsQ0F4SHFDLElBQUksQ0FBQyxLQUFLLEdBd0gvQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IEhvdXNlVUkgZnJvbSBcIi4vc2NyaXB0cy9Ib3VzZVVJXCJcbmltcG9ydCBNYWluVUkgZnJvbSBcIi4vc2NyaXB0cy9NYWluVUlcIlxyXG4vKlxyXG4qIOa4uOaIj+WIneWni+WMlumFjee9rjtcclxuKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZ3tcclxuICAgIHN0YXRpYyB3aWR0aDpudW1iZXI9NjQwO1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9MTEzNjtcclxuICAgIHN0YXRpYyBzY2FsZU1vZGU6c3RyaW5nPVwiZml4ZWR3aWR0aFwiO1xyXG4gICAgc3RhdGljIHNjcmVlbk1vZGU6c3RyaW5nPVwibm9uZVwiO1xyXG4gICAgc3RhdGljIGFsaWduVjpzdHJpbmc9XCJ0b3BcIjtcclxuICAgIHN0YXRpYyBhbGlnbkg6c3RyaW5nPVwibGVmdFwiO1xyXG4gICAgc3RhdGljIHN0YXJ0U2NlbmU6YW55PVwiTWFpblNjZW5lLnNjZW5lXCI7XHJcbiAgICBzdGF0aWMgc2NlbmVSb290OnN0cmluZz1cIlwiO1xyXG4gICAgc3RhdGljIGRlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgc3RhdDpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHBoeXNpY3NEZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIGV4cG9ydFNjZW5lVG9Kc29uOmJvb2xlYW49dHJ1ZTtcclxuICAgIGNvbnN0cnVjdG9yKCl7fVxyXG4gICAgc3RhdGljIGluaXQoKXtcclxuICAgICAgICB2YXIgcmVnOiBGdW5jdGlvbiA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuICAgICAgICByZWcoXCJzY3JpcHRzL0hvdXNlVUkudHNcIixIb3VzZVVJKTtcbiAgICAgICAgcmVnKFwic2NyaXB0cy9NYWluVUkudHNcIixNYWluVUkpO1xyXG4gICAgfVxyXG59XHJcbkdhbWVDb25maWcuaW5pdCgpOyIsImltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuY2xhc3MgTWFpbiB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvL+agueaNrklEReiuvue9ruWIneWni+WMluW8leaTjlx0XHRcclxuXHRcdGlmICh3aW5kb3dbXCJMYXlhM0RcIl0pIExheWEzRC5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0KTtcclxuXHRcdGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG5cdFx0TGF5YVtcIlBoeXNpY3NcIl0gJiYgTGF5YVtcIlBoeXNpY3NcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhW1wiRGVidWdQYW5lbFwiXSAmJiBMYXlhW1wiRGVidWdQYW5lbFwiXS5lbmFibGUoKTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IExheWEuU3RhZ2UuU0NSRUVOX0hPUklaT05UQUw7XHJcblx0XHQvL0xheWEuc3RhZ2Uuc2NhbGVNb2RlID0gTGF5YS5TdGFnZS5TQ0FMRV9GSVhFRF9XSURUSDtcclxuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cclxuXHRcdExheWEuVVJMLmV4cG9ydFNjZW5lVG9Kc29uID0gR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbjtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgJiYgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0pIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdLmVuYWJsZSgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuXHRcdExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4uL0dhbWVDb25maWdcIjtcclxuaW1wb3J0IEdsb3dGaWx0ZXIgPSBMYXlhLkdsb3dGaWx0ZXI7XHJcbiAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG91c2VVSSBleHRlbmRzIExheWEuU2NlbmUge1xyXG4gICAgcHJpdmF0ZSBiZzpMYXlhLlNwcml0ZTtcclxuICAgIHB1YmxpYyBidGxSZXR1cm46TGF5YS5CdXR0b247XHJcbiAgICBwcml2YXRlIG1heExlZnRYOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBtYXhUb3BZOiBudW1iZXIgPSAwO1xyXG4gICAgY29uc3RydWN0b3IoKSB7IFxyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgaG91cnNlOkxheWEuU3ByaXRlO1xyXG4gICAgaW5pdCgpOnZvaWR7XHJcbiAgICAgICAgdGhpcy5iZyA9IG5ldyBMYXlhLlNwcml0ZSgpXHJcbiAgICAgICAgdGhpcy5iZy5sb2FkSW1hZ2UoXCJyZXMvYmcvYmdfbmV3eWVhci5wbmdcIik7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLmJnKTtcclxuICAgICAgICB0aGlzLmJnLnBvcygwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5ob3Vyc2UgPSBuZXcgTGF5YS5TcHJpdGUoKVxyXG4gICAgICAgIHRoaXMuaG91cnNlLmxvYWRJbWFnZShcInJlcy9pdGVtL3dpbl8xNjUucG5nXCIpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5ob3Vyc2UpO1xyXG4gICAgICAgIHRoaXMuaG91cnNlLnBvcygxMDAsIDc1MCk7XHJcbiAgICB9XHJcbiAgICBvbkVuYWJsZSgpOnZvaWR7XHJcbiAgICAgICAgdGhpcy5idGxSZXR1cm4ub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5vblJldHVybik7XHJcbiAgICB9XHJcbiAgICBvblJldHVybigpOnZvaWQge1xyXG4gICAgICAgIExheWEuU2NlbmUuY2xvc2UoXCJIb3VzZVNjZW5lLnNjZW5lXCIpO1xyXG4gICAgICAgIExheWEuU2NlbmUub3BlbihcIk1haW5TY2VuZS5zY2VuZVwiKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi4vR2FtZUNvbmZpZ1wiO1xyXG5pbXBvcnQgR2xvd0ZpbHRlciA9IExheWEuR2xvd0ZpbHRlcjtcclxuICBleHBvcnQgZGVmYXVsdCBjbGFzcyBNYWluVUkgZXh0ZW5kcyBMYXlhLlNjZW5lIHtcclxuICAgIHByaXZhdGUgYmc6TGF5YS5TcHJpdGU7XHJcbiAgICBwdWJsaWMgYnRsSG91c2U6TGF5YS5CdXR0b247XHJcbiAgICBwdWJsaWMgYnRsV29ybGQ6TGF5YS5CdXR0b247XHJcbiAgICBwdWJsaWMgYnRsRnJpZW5kczpMYXlhLkJ1dHRvbjtcclxuXHJcbiAgICBwcml2YXRlIG1heExlZnRYOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBtYXhUb3BZOiBudW1iZXIgPSAwO1xyXG4gICAgY29uc3RydWN0b3IoKSB7IFxyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgaG91cnNlOkxheWEuU3ByaXRlO1xyXG4gICAgaW5pdCgpOnZvaWR7XHJcbiAgICAgICAgdGhpcy5iZyA9IG5ldyBMYXlhLlNwcml0ZSgpXHJcbiAgICAgICAgdGhpcy5iZy5sb2FkSW1hZ2UoXCJyZXMvYmcvYmdfbmV3eWVhci5wbmdcIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLk9uTG9hZEJnQ29tcGxldGVkKSk7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLmJnKTtcclxuICAgICAgICB0aGlzLmJnLnBvcygwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5ob3Vyc2UgPSBuZXcgTGF5YS5TcHJpdGUoKVxyXG4gICAgICAgIHRoaXMuaG91cnNlLmxvYWRJbWFnZShcInJlcy9pdGVtL3dpbl8xNjQucG5nXCIpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5ob3Vyc2UpO1xyXG4gICAgICAgIHRoaXMuaG91cnNlLnBvcygxMDAsIDc1MCk7XHJcbiAgICAgICAgdGhpcy5ob3Vyc2Uub24oTGF5YS5FdmVudC5NT1VTRV9PVVQsIHRoaXMsIHRoaXMuT25Gb2N1c09mZiwgW3RoaXMuaG91cnNlXSk7XHJcbiAgICAgICAgdGhpcy5ob3Vyc2Uub24oTGF5YS5FdmVudC5NT1VTRV9PVkVSLCB0aGlzLCB0aGlzLk9uRm9jdXNPbiwgW3RoaXMuaG91cnNlXSk7XHJcbiAgICAgICAgdGhpcy5ob3Vyc2Uub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5PbkhvdXJzZUNsaWNrLCBbdGhpcy5ob3Vyc2VdKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgR2xvd0ZpbHRlcihob3Vyc2U6TGF5YS5TcHJpdGUsIGJTaG93R2xvdzpCb29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGJTaG93R2xvdylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8v5Yib5bu65LiA5Liq5Y+R5YWJ5ruk6ZWcXHJcbiAgICAgICAgICAgIHZhciBnbG93RmlsdGVyOiBMYXlhLkdsb3dGaWx0ZXIgPSBuZXcgTGF5YS5HbG93RmlsdGVyKFwiI2ZmZmYwMFwiLCAxMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIC8v6K6+572u5ruk6ZWc6ZuG5ZCI5Li65Y+R5YWJ5ruk6ZWcXHJcbiAgICAgICAgICAgIGhvdXJzZS5maWx0ZXJzID0gW2dsb3dGaWx0ZXJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBob3Vyc2UuZmlsdGVycyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBPbkZvY3VzT2ZmKHNwOkxheWEuU3ByaXRlKTp2b2lkIHtcclxuICAgICAgICB0aGlzLkdsb3dGaWx0ZXIoc3AsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIE9uRm9jdXNPbihzcDpMYXlhLlNwcml0ZSk6dm9pZCB7XHJcbiAgICAgICAgdGhpcy5HbG93RmlsdGVyKHNwLCB0cnVlKTtcclxuICAgIH1cclxuICAgIE9uSG91cnNlQ2xpY2soc3A6TGF5YS5TcHJpdGUpIHtcclxuICAgICAgICBMYXlhLlNjZW5lLm9wZW4oXCJIb3VzZVNjZW5lLnNjZW5lXCIpXHJcbiAgICB9XHJcbiAgICBPbkxvYWRCZ0NvbXBsZXRlZCgpOnZvaWQge1xyXG4gICAgICAgIHRoaXMubWF4TGVmdFggPSBHYW1lQ29uZmlnLndpZHRoIC0gdGhpcy5iZy53aWR0aDtcclxuICAgICAgICBpZiAodGhpcy5tYXhMZWZ0WCA+IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1heExlZnRYID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tYXhUb3BZID0gR2FtZUNvbmZpZy5oZWlnaHQgLSB0aGlzLmJnLmhlaWdodDtcclxuICAgICAgICBpZiAodGhpcy5tYXhUb3BZID4gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4VG9wWSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25FbmFibGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5idGxIb3VzZS5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCB0aGlzLm9uSG91c2VDbGljayk7XHJcbiAgICAgICAgdGhpcy5idGxXb3JsZC5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCB0aGlzLm9uV29ybGRDbGljayk7XHJcbiAgICAgICAgdGhpcy5idGxGcmllbmRzLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMub25GcmllbmRzQ2xpY2spO1xyXG4gICAgICAgIExheWEuc3RhZ2Uub24oTGF5YS5FdmVudC5NT1VTRV9NT1ZFLCB0aGlzLCB0aGlzLk9uTW91c2VNb3ZlKTtcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTU9VU0VfT1VULCB0aGlzLCB0aGlzLk9uTW91c2VFbmQpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBsYXN0WDpudW1iZXIgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBsYXN0WTpudW1iZXIgPSBudWxsO1xyXG5cclxuICAgIE9uTW91c2VNb3ZlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3RYID09IG51bGwgfHwgdGhpcy5sYXN0WSA9PSBudWxsKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIGRlbHRhWDpudW1iZXIgPSBMYXlhLnN0YWdlLm1vdXNlWCAtIHRoaXMubGFzdFg7XHJcbiAgICAgICAgICAgIHZhciBkZWx0YVk6bnVtYmVyID0gTGF5YS5zdGFnZS5tb3VzZVkgLSB0aGlzLmxhc3RZO1xyXG4gICAgICAgICAgICB0aGlzLmJnLnggPSB0aGlzLmJnLnggKyBkZWx0YVg7XHJcbiAgICAgICAgICAgIHRoaXMuYmcueSA9IHRoaXMuYmcueCArIGRlbHRhWTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJnLnggPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJnLnggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJnLnkgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJnLnkgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJnLnggPCB0aGlzLm1heExlZnRYKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJnLnggPSB0aGlzLm1heExlZnRYO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJnLnkgPCB0aGlzLm1heFRvcFkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmcueSA9IHRoaXMubWF4VG9wWTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmhvdXJzZS5wb3MoMTAwICsgdGhpcy5iZy54LCA3NTAgKyB0aGlzLmJnLnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhc3RYID0gTGF5YS5zdGFnZS5tb3VzZVg7XHJcbiAgICAgICAgdGhpcy5sYXN0WSA9IExheWEuc3RhZ2UubW91c2VZO1xyXG4gICAgfVxyXG4gICAgT25Nb3VzZUVuZCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmxhc3RYID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxhc3RZID0gbnVsbDtcclxuICAgIH1cclxuICAgIG9uSG91c2VDbGljayhlOiBMYXlhLkV2ZW50KTp2b2lke1xyXG4gICAgICAgIHRoaXMuYnRsSG91c2UubGFiZWwgPSBcInByZXNzZWRcIjtcclxuICAgIH1cclxuICAgIG9uV29ybGRDbGljayhlOiBMYXlhLkV2ZW50KTp2b2lke1xyXG4gICAgICAgIHRoaXMuYnRsV29ybGQubGFiZWwgPSBcInByZXNzZWRcIjtcclxuICAgIH1cclxuICAgIG9uRnJpZW5kc0NsaWNrKGU6IExheWEuRXZlbnQpOnZvaWR7XHJcbiAgICAgICAgdGhpcy5idGxGcmllbmRzLmxhYmVsID0gXCJwcmVzc2VkXCI7XHJcbiAgICB9XHJcbn1cclxuIl19
