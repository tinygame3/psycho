var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var HouseUI_1 = require("./scripts/HouseUI");
var MainUI_1 = require("./scripts/MainUI");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("scripts/HouseUI.ts", HouseUI_1.default);
        reg("scripts/MainUI.ts", MainUI_1.default);
    };
    GameConfig.width = 640;
    GameConfig.height = 1136;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "MainScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./scripts/HouseUI":3,"./scripts/MainUI":4}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.screenMode = Laya.Stage.SCREEN_HORIZONTAL;
        //Laya.stage.scaleMode = Laya.Stage.SCALE_FIXED_WIDTH;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    Main.mainScene = null;
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var MainUI_1 = require("../scripts/MainUI");
var HouseUI = /** @class */ (function (_super) {
    __extends(HouseUI, _super);
    function HouseUI() {
        var _this = _super.call(this) || this;
        _this.maxLeftX = 0;
        _this.maxTopY = 0;
        _this.init();
        return _this;
    }
    HouseUI.prototype.init = function () {
        this.autoDestroyAtClosed = true;
        this.bg = new Laya.Sprite();
        this.bg.loadImage("res/bg/bg_newyear.png");
        this.addChild(this.bg);
        this.bg.pos(0, 0);
        this.hourse = new Laya.Sprite();
        this.hourse.loadImage("res/item/win_165.png");
        this.addChild(this.hourse);
        this.hourse.pos(100, 750);
    };
    HouseUI.prototype.onEnable = function () {
        this.btlReturn.on(Laya.Event.CLICK, this, this.onReturn);
    };
    HouseUI.prototype.onReturn = function () {
        Laya.Scene.close("HouseScene.scene", "houseScene");
        MainUI_1.default.curScene.bStop = false;
        //Laya.Scene.open("MainScene.scene");
        //Laya.Scene.open("MainScene.scene", true);
    };
    return HouseUI;
}(Laya.Scene));
exports.default = HouseUI;
},{"../scripts/MainUI":4}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("../GameConfig");
var MainUI = /** @class */ (function (_super) {
    __extends(MainUI, _super);
    function MainUI() {
        var _this = _super.call(this) || this;
        _this.maxLeftX = 0;
        _this.maxTopY = 0;
        _this.bStop = false;
        _this.lastX = null;
        _this.lastY = null;
        _this.bgX = 0;
        _this.bgY = 0;
        _this.init();
        return _this;
    }
    MainUI.prototype.init = function () {
        this.bg = new Laya.Sprite();
        this.bg.loadImage("res/bg/bg_newyear.png", Laya.Handler.create(this, this.OnLoadBgCompleted));
        this.addChild(this.bg);
        this.bg.pos(0, 0);
        this.hourse = new Laya.Sprite();
        this.hourse.loadImage("res/item/win_164.png");
        this.addChild(this.hourse);
        this.hourse.pos(100, 750);
        this.hourse.on(Laya.Event.MOUSE_OUT, this, this.OnFocusOff, [this.hourse]);
        this.hourse.on(Laya.Event.MOUSE_OVER, this, this.OnFocusOn, [this.hourse]);
        this.hourse.on(Laya.Event.CLICK, this, this.OnHourseClick, [this.hourse]);
        MainUI.curScene = this;
    };
    MainUI.prototype.onEnable = function () {
        this.btlHouse.on(Laya.Event.CLICK, this, this.onHouseClick);
        this.btlWorld.on(Laya.Event.CLICK, this, this.onWorldClick);
        this.btlFriends.on(Laya.Event.CLICK, this, this.onFriendsClick);
        Laya.stage.on(Laya.Event.MOUSE_MOVE, this, this.OnMouseMove);
        Laya.stage.on(Laya.Event.MOUSE_OUT, this, this.OnMouseEnd);
        Laya.timer.frameLoop(1, this, this.onUpdate);
    };
    MainUI.prototype.onDisable = function () {
        Laya.timer.clear(this, this.onUpdate);
    };
    MainUI.prototype.onUpdate = function () {
        //this.hourse.pos(100 + this.bgX, 750 + this.bgY);
        //this.bg.x = this.bgX;
        //this.bg.y = this.bgY;
        console.log(this.bg.x);
    };
    MainUI.prototype.GlowFilter = function (hourse, bShowGlow) {
        if (bShowGlow) {
            //创建一个发光滤镜
            var glowFilter = new Laya.GlowFilter("#ffff00", 10, 0, 0);
            //设置滤镜集合为发光滤镜
            hourse.filters = [glowFilter];
        }
        else {
            hourse.filters = [];
        }
    };
    MainUI.prototype.OnFocusOff = function (sp) {
        this.GlowFilter(sp, false);
    };
    MainUI.prototype.OnFocusOn = function (sp) {
        this.GlowFilter(sp, true);
    };
    MainUI.prototype.OnHourseClick = function (sp) {
        this.bStop = true;
        Laya.Scene.open("HouseScene.scene", false);
    };
    MainUI.prototype.OnLoadBgCompleted = function () {
        this.maxLeftX = GameConfig_1.default.width - this.bg.width;
        if (this.maxLeftX > 0) {
            this.maxLeftX = 0;
        }
        this.maxTopY = GameConfig_1.default.height - this.bg.height;
        if (this.maxTopY > 0) {
            this.maxTopY = 0;
        }
    };
    MainUI.prototype.OnMouseMove = function () {
        if (this.bStop) {
            return;
        }
        if (this.lastX == null || this.lastY == null) {
        }
        else {
            //return;
            var deltaX = Laya.stage.mouseX - this.lastX;
            var deltaY = Laya.stage.mouseY - this.lastY;
            this.bg.x = this.bg.x + deltaX;
            this.bg.y = this.bg.x + deltaY;
            this.bgX = this.bg.x;
            this.bgY = this.bg.y;
            if (this.bg.x > 0) {
                this.bg.x = 0;
            }
            if (this.bg.y > 0) {
                this.bg.y = 0;
            }
            if (this.bg.x < this.maxLeftX) {
                this.bg.x = this.maxLeftX;
            }
            if (this.bg.y < this.maxTopY) {
                this.bg.y = this.maxTopY;
            }
            this.hourse.pos(100 + this.bg.x, 750 + this.bg.y);
        }
        this.lastX = Laya.stage.mouseX;
        this.lastY = Laya.stage.mouseY;
    };
    MainUI.prototype.OnMouseEnd = function () {
        this.lastX = null;
        this.lastY = null;
    };
    MainUI.prototype.onHouseClick = function (e) {
        this.btlHouse.label = "pressed";
    };
    MainUI.prototype.onWorldClick = function (e) {
        this.btlWorld.label = "pressed";
    };
    MainUI.prototype.onFriendsClick = function (e) {
        this.btlFriends.label = "pressed";
    };
    return MainUI;
}(Laya.Scene));
exports.default = MainUI;
},{"../GameConfig":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL1Byb2dyYW0gRmlsZXMvTGF5YUFpcklERS9yZXNvdXJjZXMvYXBwL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvR2FtZUNvbmZpZy50cyIsInNyYy9NYWluLnRzIiwic3JjL3NjcmlwdHMvSG91c2VVSS50cyIsInNyYy9zY3JpcHRzL01haW5VSS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNWQSxnR0FBZ0c7QUFDaEcsNkNBQXVDO0FBQ3ZDLDJDQUFxQztBQUNyQzs7RUFFRTtBQUNGO0lBYUk7SUFBYyxDQUFDO0lBQ1IsZUFBSSxHQUFYO1FBQ0ksSUFBSSxHQUFHLEdBQWEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUM7UUFDN0MsR0FBRyxDQUFDLG9CQUFvQixFQUFDLGlCQUFPLENBQUMsQ0FBQztRQUNsQyxHQUFHLENBQUMsbUJBQW1CLEVBQUMsZ0JBQU0sQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFqQk0sZ0JBQUssR0FBUSxHQUFHLENBQUM7SUFDakIsaUJBQU0sR0FBUSxJQUFJLENBQUM7SUFDbkIsb0JBQVMsR0FBUSxZQUFZLENBQUM7SUFDOUIscUJBQVUsR0FBUSxNQUFNLENBQUM7SUFDekIsaUJBQU0sR0FBUSxLQUFLLENBQUM7SUFDcEIsaUJBQU0sR0FBUSxNQUFNLENBQUM7SUFDckIscUJBQVUsR0FBSyxpQkFBaUIsQ0FBQztJQUNqQyxvQkFBUyxHQUFRLEVBQUUsQ0FBQztJQUNwQixnQkFBSyxHQUFTLEtBQUssQ0FBQztJQUNwQixlQUFJLEdBQVMsS0FBSyxDQUFDO0lBQ25CLHVCQUFZLEdBQVMsS0FBSyxDQUFDO0lBQzNCLDRCQUFpQixHQUFTLElBQUksQ0FBQztJQU8xQyxpQkFBQztDQW5CRCxBQW1CQyxJQUFBO2tCQW5Cb0IsVUFBVTtBQW9CL0IsVUFBVSxDQUFDLElB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LENBQUM7O0lBQ2hCLENBQUM7SUFHRCxxQkFBSSxHQUFKO1FBQ0ksSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQTtRQUMzQixJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyx1QkFBdUIsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztRQUM5RixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFbEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQTtRQUMvQixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzlDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUs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LENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7YUFDN0I7WUFDRCxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQzVCO2dCQUNJLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7YUFDNUI7WUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDckQ7UUFDRCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQy9CLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDbkMsQ0FBQztJQUNELDJCQUFVLEdBQVY7UUFDSSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUN0QixDQUFDO0lBQ0QsNkJBQVksR0FBWixVQUFhLENBQWE7UUFDdEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO0lBQ3BDLENBQUM7SUFDRCw2QkFBWSxHQUFaLFVBQWEsQ0FBYTtRQUN0QixJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7SUFDcEMsQ0FBQztJQUNELCtCQUFjLEdBQWQsVUFBZSxDQUFhO1FBQ3hCLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztJQUN0QyxDQUFDO0lBQ0wsYUFBQztBQUFELENBL0lFLEFBK0lELENBL0lxQyxJQUFJLENBQUMsS0FBSyxHQStJL0MiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBIb3VzZVVJIGZyb20gXCIuL3NjcmlwdHMvSG91c2VVSVwiXG5pbXBvcnQgTWFpblVJIGZyb20gXCIuL3NjcmlwdHMvTWFpblVJXCJcclxuLypcclxuKiDmuLjmiI/liJ3lp4vljJbphY3nva47XHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWd7XHJcbiAgICBzdGF0aWMgd2lkdGg6bnVtYmVyPTY0MDtcclxuICAgIHN0YXRpYyBoZWlnaHQ6bnVtYmVyPTExMzY7XHJcbiAgICBzdGF0aWMgc2NhbGVNb2RlOnN0cmluZz1cImZpeGVkd2lkdGhcIjtcclxuICAgIHN0YXRpYyBzY3JlZW5Nb2RlOnN0cmluZz1cIm5vbmVcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwidG9wXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImxlZnRcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cIk1haW5TY2VuZS5zY2VuZVwiO1xyXG4gICAgc3RhdGljIHNjZW5lUm9vdDpzdHJpbmc9XCJcIjtcclxuICAgIHN0YXRpYyBkZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHN0YXQ6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBwaHlzaWNzRGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBleHBvcnRTY2VuZVRvSnNvbjpib29sZWFuPXRydWU7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe31cclxuICAgIHN0YXRpYyBpbml0KCl7XHJcbiAgICAgICAgdmFyIHJlZzogRnVuY3Rpb24gPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcbiAgICAgICAgcmVnKFwic2NyaXB0cy9Ib3VzZVVJLnRzXCIsSG91c2VVSSk7XG4gICAgICAgIHJlZyhcInNjcmlwdHMvTWFpblVJLnRzXCIsTWFpblVJKTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLmluaXQoKTsiLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCI7XHJcbmNsYXNzIE1haW4ge1xyXG5cdHN0YXRpYyBtYWluU2NlbmU6TGF5YS5TY2VuZSA9IG51bGw7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvL+agueaNrklEReiuvue9ruWIneWni+WMluW8leaTjlx0XHRcclxuXHRcdGlmICh3aW5kb3dbXCJMYXlhM0RcIl0pIExheWEzRC5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0KTtcclxuXHRcdGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG5cdFx0TGF5YVtcIlBoeXNpY3NcIl0gJiYgTGF5YVtcIlBoeXNpY3NcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhW1wiRGVidWdQYW5lbFwiXSAmJiBMYXlhW1wiRGVidWdQYW5lbFwiXS5lbmFibGUoKTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IExheWEuU3RhZ2UuU0NSRUVOX0hPUklaT05UQUw7XHJcblx0XHQvL0xheWEuc3RhZ2Uuc2NhbGVNb2RlID0gTGF5YS5TdGFnZS5TQ0FMRV9GSVhFRF9XSURUSDtcclxuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cclxuXHRcdExheWEuVVJMLmV4cG9ydFNjZW5lVG9Kc29uID0gR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbjtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgJiYgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0pIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdLmVuYWJsZSgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuXHRcdExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4uL0dhbWVDb25maWdcIjtcclxuaW1wb3J0IEdsb3dGaWx0ZXIgPSBMYXlhLkdsb3dGaWx0ZXI7XHJcbmltcG9ydCBNYWluVUkgZnJvbSBcIi4uL3NjcmlwdHMvTWFpblVJXCI7XHJcbiAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG91c2VVSSBleHRlbmRzIExheWEuU2NlbmUge1xyXG4gICAgcHJpdmF0ZSBiZzpMYXlhLlNwcml0ZTtcclxuICAgIHB1YmxpYyBidGxSZXR1cm46TGF5YS5CdXR0b247XHJcbiAgICBwcml2YXRlIG1heExlZnRYOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBtYXhUb3BZOiBudW1iZXIgPSAwO1xyXG4gICAgY29uc3RydWN0b3IoKSB7IFxyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgaG91cnNlOkxheWEuU3ByaXRlO1xyXG4gICAgaW5pdCgpOnZvaWR7XHJcbiAgICAgICAgdGhpcy5hdXRvRGVzdHJveUF0Q2xvc2VkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmJnID0gbmV3IExheWEuU3ByaXRlKCk7XHJcbiAgICAgICAgdGhpcy5iZy5sb2FkSW1hZ2UoXCJyZXMvYmcvYmdfbmV3eWVhci5wbmdcIik7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLmJnKTtcclxuICAgICAgICB0aGlzLmJnLnBvcygwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5ob3Vyc2UgPSBuZXcgTGF5YS5TcHJpdGUoKTtcclxuICAgICAgICB0aGlzLmhvdXJzZS5sb2FkSW1hZ2UoXCJyZXMvaXRlbS93aW5fMTY1LnBuZ1wiKTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMuaG91cnNlKTtcclxuICAgICAgICB0aGlzLmhvdXJzZS5wb3MoMTAwLCA3NTApO1xyXG4gICAgfVxyXG4gICAgb25FbmFibGUoKTp2b2lke1xyXG4gICAgICAgIHRoaXMuYnRsUmV0dXJuLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMub25SZXR1cm4pO1xyXG4gICAgfVxyXG4gICAgb25SZXR1cm4oKTp2b2lkIHtcclxuICAgICAgICBMYXlhLlNjZW5lLmNsb3NlKFwiSG91c2VTY2VuZS5zY2VuZVwiLCBcImhvdXNlU2NlbmVcIik7XHJcbiAgICAgICAgTWFpblVJLmN1clNjZW5lLmJTdG9wID0gZmFsc2U7XHJcbiAgICAgICAgLy9MYXlhLlNjZW5lLm9wZW4oXCJNYWluU2NlbmUuc2NlbmVcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy9MYXlhLlNjZW5lLm9wZW4oXCJNYWluU2NlbmUuc2NlbmVcIiwgdHJ1ZSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4uL0dhbWVDb25maWdcIjtcclxuaW1wb3J0IEdsb3dGaWx0ZXIgPSBMYXlhLkdsb3dGaWx0ZXI7XHJcbiAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFpblVJIGV4dGVuZHMgTGF5YS5TY2VuZSB7XHJcbiAgICBwcml2YXRlIGJnOkxheWEuU3ByaXRlO1xyXG4gICAgcHVibGljIGJ0bEhvdXNlOkxheWEuQnV0dG9uO1xyXG4gICAgcHVibGljIGJ0bFdvcmxkOkxheWEuQnV0dG9uO1xyXG4gICAgcHVibGljIGJ0bEZyaWVuZHM6TGF5YS5CdXR0b247XHJcblxyXG4gICAgcHJpdmF0ZSBtYXhMZWZ0WDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgbWF4VG9wWTogbnVtYmVyID0gMDtcclxuICAgIHB1YmxpYyBiU3RvcDpib29sZWFuID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgc3RhdGljIGN1clNjZW5lOk1haW5VSTtcclxuICAgIGNvbnN0cnVjdG9yKCkgeyBcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIGhvdXJzZTpMYXlhLlNwcml0ZTtcclxuICAgIGluaXQoKTp2b2lke1xyXG4gICAgICAgIHRoaXMuYmcgPSBuZXcgTGF5YS5TcHJpdGUoKVxyXG4gICAgICAgIHRoaXMuYmcubG9hZEltYWdlKFwicmVzL2JnL2JnX25ld3llYXIucG5nXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5PbkxvYWRCZ0NvbXBsZXRlZCkpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5iZyk7XHJcbiAgICAgICAgdGhpcy5iZy5wb3MoMCwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMuaG91cnNlID0gbmV3IExheWEuU3ByaXRlKClcclxuICAgICAgICB0aGlzLmhvdXJzZS5sb2FkSW1hZ2UoXCJyZXMvaXRlbS93aW5fMTY0LnBuZ1wiKTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMuaG91cnNlKTtcclxuICAgICAgICB0aGlzLmhvdXJzZS5wb3MoMTAwLCA3NTApO1xyXG4gICAgICAgIHRoaXMuaG91cnNlLm9uKExheWEuRXZlbnQuTU9VU0VfT1VULCB0aGlzLCB0aGlzLk9uRm9jdXNPZmYsIFt0aGlzLmhvdXJzZV0pO1xyXG4gICAgICAgIHRoaXMuaG91cnNlLm9uKExheWEuRXZlbnQuTU9VU0VfT1ZFUiwgdGhpcywgdGhpcy5PbkZvY3VzT24sIFt0aGlzLmhvdXJzZV0pO1xyXG4gICAgICAgIHRoaXMuaG91cnNlLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMuT25Ib3Vyc2VDbGljaywgW3RoaXMuaG91cnNlXSk7XHJcbiAgICAgICAgTWFpblVJLmN1clNjZW5lID0gdGhpcztcclxuICAgIH1cclxuICAgIG9uRW5hYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYnRsSG91c2Uub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5vbkhvdXNlQ2xpY2spO1xyXG4gICAgICAgIHRoaXMuYnRsV29ybGQub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5vbldvcmxkQ2xpY2spO1xyXG4gICAgICAgIHRoaXMuYnRsRnJpZW5kcy5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCB0aGlzLm9uRnJpZW5kc0NsaWNrKTtcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTU9VU0VfTU9WRSwgdGhpcywgdGhpcy5Pbk1vdXNlTW92ZSk7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5vbihMYXlhLkV2ZW50Lk1PVVNFX09VVCwgdGhpcywgdGhpcy5Pbk1vdXNlRW5kKTtcclxuICAgICAgICBMYXlhLnRpbWVyLmZyYW1lTG9vcCgxLCB0aGlzLCB0aGlzLm9uVXBkYXRlKTtcclxuICAgIH1cclxuICAgIG9uRGlzYWJsZSgpOiB2b2lke1xyXG4gICAgICAgIExheWEudGltZXIuY2xlYXIodGhpcywgdGhpcy5vblVwZGF0ZSk7XHJcbiAgICB9XHJcbiAgICBvblVwZGF0ZSgpOiB2b2lke1xyXG4gICAgICAgIC8vdGhpcy5ob3Vyc2UucG9zKDEwMCArIHRoaXMuYmdYLCA3NTAgKyB0aGlzLmJnWSk7XHJcbiAgICAgICAgLy90aGlzLmJnLnggPSB0aGlzLmJnWDtcclxuICAgICAgICAvL3RoaXMuYmcueSA9IHRoaXMuYmdZO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYmcueClcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIEdsb3dGaWx0ZXIoaG91cnNlOkxheWEuU3ByaXRlLCBiU2hvd0dsb3c6Qm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmIChiU2hvd0dsb3cpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL+WIm+W7uuS4gOS4quWPkeWFiea7pOmVnFxyXG4gICAgICAgICAgICB2YXIgZ2xvd0ZpbHRlcjogTGF5YS5HbG93RmlsdGVyID0gbmV3IExheWEuR2xvd0ZpbHRlcihcIiNmZmZmMDBcIiwgMTAsIDAsIDApO1xyXG4gICAgICAgICAgICAvL+iuvue9rua7pOmVnOmbhuWQiOS4uuWPkeWFiea7pOmVnFxyXG4gICAgICAgICAgICBob3Vyc2UuZmlsdGVycyA9IFtnbG93RmlsdGVyXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaG91cnNlLmZpbHRlcnMgPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgT25Gb2N1c09mZihzcDpMYXlhLlNwcml0ZSk6dm9pZCB7XHJcbiAgICAgICAgdGhpcy5HbG93RmlsdGVyKHNwLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBPbkZvY3VzT24oc3A6TGF5YS5TcHJpdGUpOnZvaWQge1xyXG4gICAgICAgIHRoaXMuR2xvd0ZpbHRlcihzcCwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBPbkhvdXJzZUNsaWNrKHNwOkxheWEuU3ByaXRlKSB7XHJcbiAgICAgICAgdGhpcy5iU3RvcCA9IHRydWU7XHJcbiAgICAgICAgTGF5YS5TY2VuZS5vcGVuKFwiSG91c2VTY2VuZS5zY2VuZVwiLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBPbkxvYWRCZ0NvbXBsZXRlZCgpOnZvaWQge1xyXG4gICAgICAgIHRoaXMubWF4TGVmdFggPSBHYW1lQ29uZmlnLndpZHRoIC0gdGhpcy5iZy53aWR0aDtcclxuICAgICAgICBpZiAodGhpcy5tYXhMZWZ0WCA+IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1heExlZnRYID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tYXhUb3BZID0gR2FtZUNvbmZpZy5oZWlnaHQgLSB0aGlzLmJnLmhlaWdodDtcclxuICAgICAgICBpZiAodGhpcy5tYXhUb3BZID4gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4VG9wWSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbGFzdFg6bnVtYmVyID0gbnVsbDtcclxuICAgIHByaXZhdGUgbGFzdFk6bnVtYmVyID0gbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIGJnWDpudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBiZ1k6bnVtYmVyID0gMDtcclxuICAgIE9uTW91c2VNb3ZlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmJTdG9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubGFzdFggPT0gbnVsbCB8fCB0aGlzLmxhc3RZID09IG51bGwpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy9yZXR1cm47XHJcbiAgICAgICAgICAgIHZhciBkZWx0YVg6bnVtYmVyID0gTGF5YS5zdGFnZS5tb3VzZVggLSB0aGlzLmxhc3RYO1xyXG4gICAgICAgICAgICB2YXIgZGVsdGFZOm51bWJlciA9IExheWEuc3RhZ2UubW91c2VZIC0gdGhpcy5sYXN0WTtcclxuICAgICAgICAgICAgdGhpcy5iZy54ID0gdGhpcy5iZy54ICsgZGVsdGFYO1xyXG4gICAgICAgICAgICB0aGlzLmJnLnkgPSB0aGlzLmJnLnggKyBkZWx0YVk7XHJcbiAgICAgICAgICAgIHRoaXMuYmdYID0gdGhpcy5iZy54O1xyXG4gICAgICAgICAgICB0aGlzLmJnWSA9IHRoaXMuYmcueTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJnLnggPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJnLnggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJnLnkgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJnLnkgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJnLnggPCB0aGlzLm1heExlZnRYKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJnLnggPSB0aGlzLm1heExlZnRYO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJnLnkgPCB0aGlzLm1heFRvcFkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmcueSA9IHRoaXMubWF4VG9wWTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmhvdXJzZS5wb3MoMTAwICsgdGhpcy5iZy54LCA3NTAgKyB0aGlzLmJnLnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhc3RYID0gTGF5YS5zdGFnZS5tb3VzZVg7XHJcbiAgICAgICAgdGhpcy5sYXN0WSA9IExheWEuc3RhZ2UubW91c2VZO1xyXG4gICAgfVxyXG4gICAgT25Nb3VzZUVuZCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmxhc3RYID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxhc3RZID0gbnVsbDtcclxuICAgIH1cclxuICAgIG9uSG91c2VDbGljayhlOiBMYXlhLkV2ZW50KTp2b2lke1xyXG4gICAgICAgIHRoaXMuYnRsSG91c2UubGFiZWwgPSBcInByZXNzZWRcIjtcclxuICAgIH1cclxuICAgIG9uV29ybGRDbGljayhlOiBMYXlhLkV2ZW50KTp2b2lke1xyXG4gICAgICAgIHRoaXMuYnRsV29ybGQubGFiZWwgPSBcInByZXNzZWRcIjtcclxuICAgIH1cclxuICAgIG9uRnJpZW5kc0NsaWNrKGU6IExheWEuRXZlbnQpOnZvaWR7XHJcbiAgICAgICAgdGhpcy5idGxGcmllbmRzLmxhYmVsID0gXCJwcmVzc2VkXCI7XHJcbiAgICB9XHJcbn1cclxuIl19
